<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="hr_holidays_status_form" model="ir.ui.view">
        <field name="name">Holidays Status Form Inherit</field>
        <field name="model">hr.leave.type</field>
        <field name="inherit_id" ref="hr_holidays.edit_holiday_status_form"/>
        <field name="arch" type="xml">
            <group name="validation" position="inside">
                <field name="affects_payslip"/>
                <field name="extended"/>
            </group>
            <group name="description" position="inside">
                <field name="move_type_id"/>
            </group>
        </field>
    </record>

    <record id="hr_holidays_status_list" model="ir.ui.view">
        <field name="name">Holidays Status List Inherit</field>
        <field name="model">hr.leave.type</field>
        <field name="inherit_id" ref="hr_holidays.view_holiday_status_normal_tree"/>
        <field name="arch" type="xml">
            <field name="code" position="after">
                <field name="affects_payslip"/>
                <field name="extended"/>
                 <field name="move_type_id"/>
            </field>
        </field>
    </record>

    <record id="hr_leave_allocation_form_inherit" model="ir.ui.view">
        <field name="name">Holidays Leave Allocation Form Inherit</field>
        <field name="model">hr.leave.allocation</field>
        <field name="inherit_id" ref="hr_holidays.hr_leave_allocation_view_form"/>
        <field name="arch" type="xml">
            <field name="department_id" position="attributes">
                <attribute name="attrs">
                {'readonly':['|','|',('holiday_type','=','category'),('state','=', 'validate'),('employee_id', '!=', False)],'invisible':[('holiday_type','=','category')]}
                </attribute>
                <attribute name="options">{'no_create': 1}</attribute>
            </field>
            <field name="employee_id" position="attributes">
                <attribute name="options">{'no_create': 1}</attribute>
            </field>
            <field name="holiday_status_id" position="attributes">
                <attribute name="options">{'no_create': 1}</attribute>
            </field>
        </field>
    </record>

    <record id="hr_leave_form_inherit" model="ir.ui.view">
        <field name="name">Holidays Leave Form Inherit</field>
        <field name="model">hr.leave</field>
        <field name="inherit_id" ref="hr_holidays.hr_leave_view_form"/>
        <field name="arch" type="xml">
            <field name="state" position="after">
                <field name="holiday_type" invisible="1"/>
            </field>
            <field name="department_id" position="attributes">
                <attribute name="attrs">
                {'readonly':['|','|',('holiday_type','=','category'),('state','=', 'validate'),('employee_id', '!=', False)],'invisible':[('holiday_type','=','category')]}
                </attribute>
                <attribute name="options">{'no_create': 1}</attribute>
            </field>
            <field name="employee_id" position="attributes">
                <attribute name="options">{'no_create': 1}</attribute>
            </field>
            <field name="holiday_status_id" position="attributes">
                <attribute name="options">{'no_create': 1}</attribute>
            </field>
        </field>
    </record>

<!-- Se cambia la secuencia en que se muestran las peticiones de ausencias a: tree, form, calendar -->
    <!-- <record id="hr_holidays.action_open_ask_holidays_tree" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
    </record>

    <record id="hr_holidays.action_open_ask_holidays_form" model="ir.actions.act_window.view">
        <field name="sequence" eval="2"/>
    </record>

    <record id="hr_holidays.action_open_ask_holidays_calendar" model="ir.actions.act_window.view">
        <field name="sequence" eval="3"/>
    </record> -->
<!-- Se cambia el context para que deje de mostrar solo las ausencias del usuario conectado -->
    <!-- <record id="hr_holidays.    " model="ir.actions.act_window">
        <field name="context">{
            'default_type': 'remove',
            'needaction_menu_ref':
            [
                'hr_holidays.menu_open_company_allocation',
            ]
        }</field>
    </record>

    <record id="hr_holidays.open_allocation_holidays" model="ir.actions.act_window">
        <field name="context">{
            'default_type':'add',
            'needaction_menu_ref':
            [
                'hr_holidays.menu_open_company_allocation',
            ]
        }</field>
    </record>

    <record id="hr_holidays.open_company_allocation" model="ir.actions.act_window">
        <field name="context">{
            'search_default_group_type': 1,
            'search_default_year': 1 ,
            'needaction_menu_ref':
            [
                'hr_holidays.menu_open_ask_holidays_new',
                'hr_holidays.menu_open_allocation_holidays',
                'hr_holidays.menu_request_approve_allocation',
                'hr_holidays.menu_open_employee_leave',
            ]
        }</field>
    </record>

    <record id="hr_holidays.open_department_holidays_approve" model="ir.actions.act_window">
        <field name="context">{'search_default_approve':1}</field>
    </record> -->
    <!-- Registros a borrar, no los metemos dentro de un "noupdate=1 ya que las actualizaciones pueden volver a crearlos" -->
    <!-- <delete search="[('id', '=', ref('hr_holidays.menu_open_allocation_holidays', raise_if_not_found=False))]" model="ir.ui.menu"/>
    <delete search="[('id', '=', ref('hr_holidays.menu_open_department_leave_allocation_approve', raise_if_not_found=False))]" model="ir.ui.menu"/> -->
</odoo>